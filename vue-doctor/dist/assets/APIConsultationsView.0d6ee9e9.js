import{u as d}from"./index.a07c3cb5.js";import{u}from"./consultation.e687400a.js";import{d as f,o as p,a as n,c as s,F as _,t as m,u as k,x as y,e as w,w as x,b as o,y as c}from"./vendor.64c73bd9.js";const r=d();async function l(){let t=await fetch("https://apidoctor.quidam.re/api/consultations",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}}).then(e=>e.json()).catch(e=>{console.warn("error",e)});return T(t)&&await g().then(e=>{e&&l()}),t}async function g(){let t=await fetch("https://apidoctor.quidam.re/api/token/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:r.getRefreshToken})}).then(e=>e.json());return(t==null?void 0:t.token)&&(t==null?void 0:t.refresh_token)?(r.token=await(t==null?void 0:t.token),r.refresh_token=await(t==null?void 0:t.refresh_token),!0):(r.$reset(),!1)}function T(t){return/Expired JWT Token/.test(t.message)&&t.code===401}const C={class:"d-flex flex-wrap gap-5 justify-content-center overflow-scroll"},S={class:"card",style:{width:"18rem"}},v=o("img",{src:"https://place-hold.it/300",class:"card-img-top",alt:"https://place-hold.it/300"},null,-1),j={class:"card-body"},E={class:"card-title"},b={class:"card-text"},F=f({setup(t){const e=u();return d(),p(()=>{l().then(i=>{e.consultations=i["hydra:member"]})}),(i,B)=>{const h=y("router-link");return n(),s("div",C,[(n(!0),s(_,null,m(k(e).consultations,a=>(n(),s("div",{key:a["@id"]},[w(h,{to:{name:"consultation",params:{id:a.id}}},{default:x(()=>[o("div",S,[v,o("div",j,[o("h5",E,c(a.doctor_name),1),o("p",b,"date : "+c(a.date),1)])])]),_:2},1032,["to"])]))),128))])}}});export{F as default};
